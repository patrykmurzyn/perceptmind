---
import '../styles/global.css';
import NeuralBackground from '../components/NeuralBackground.astro';
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>PerceptMind</title>
	</head>
	<body>
        <NeuralBackground />
		<main>
			<h1 class="title title-top">Percept</h1>
			<h1 class="title title-bottom">
				M<span class="i-container"><span class="i" id="mind-i">i</span></span>nd
			</h1>
            <h2 class="subtitle">AI Solutions for Business</h2>
		</main>

		<script>
			import { gsap } from "gsap";
			
			// Initial entrance timeline
			const tl = gsap.timeline();

			// Initial state: The 'i' starts as '!' (inverted and orange)
			gsap.set("#mind-i", { 
                display: "inline-block", 
                transformOrigin: "center center",
                rotationX: 180,
                color: "var(--color-accent)"
            });

			// Fade in global elements
			gsap.to("body", { autoAlpha: 1, duration: 0.5 });
			
			// Initial reveal of title and subtitle
			gsap.from(".title", {
				y: 50,
				opacity: 0,
				duration: 1,
				stagger: 0.2
			});
            
            gsap.from(".subtitle", {
                y: 20,
                opacity: 0,
                duration: 1,
                delay: 0.5
            });

            // Random Periodic Animation
            // Goal: Every ~30s (randomized), flip ! to i, hold 2s, flip back.
            
            const iElement = document.getElementById('mind-i');

            function flipToIAndBack() {
                if (!iElement) return;

                const flipDuration = 0.5;
                const holdDuration = 2; // User requested 2 seconds

                const tl = gsap.timeline({
                    onComplete: () => {
                        // Reset to initial state (180deg) invisibly so the next cycle can start cleanly
                        // 540deg is visually same as 180deg (1.5 turns vs 0.5 turns)
                        gsap.set(iElement, { rotationX: 180 });
                        scheduleNextFlip();
                    }
                });

                // 1. Flip to 'i' (White, 360deg - effectively 0 visually)
                // We go from 180 -> 360 to continue the rotation direction, instead of going back to 0
                tl.to(iElement, {
                    rotationX: 360,
                    color: "var(--color-text-high)",
                    duration: flipDuration,
                    ease: "power2.inOut"
                })
                // 2. Hold
                .to(iElement, {
                    duration: holdDuration
                })
                // 3. Flip back to '!' (Orange, 540deg - effectively 180 visually)
                // Continue rotation in same direction (360 -> 540)
                .to(iElement, {
                    rotationX: 540,
                    color: "var(--color-accent)",
                    duration: flipDuration,
                    ease: "power2.inOut"
                });
            }

            function scheduleNextFlip() {
                // "Raz na jaki≈õ czas powiedzmy raz na 30 sekund w losowym momencie"
                // Random interval between 20s and 40s
                const randomDelay = Math.random() * 20 + 20; 
                
                gsap.delayedCall(randomDelay, flipToIAndBack);
            }

            // Start the cycle with an initial random delay so it doesn't happen immediately
            gsap.delayedCall(Math.random() * 5 + 2, scheduleNextFlip);
		</script>

		<style>
			main {
				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
				height: 100vh;
				width: 100%;
                gap: var(--space-3xs); /* Slight gap between lines */
			}

			.title {
				font-family: 'Satoshi', sans-serif;
				font-weight: 900; /* Black weight */
				font-size: var(--font-size-6xl);
				line-height: 1.1;
				margin: 0;
				letter-spacing: -0.02em;
				color: var(--color-text-high);
				text-transform: none;
                position: relative;
			}
            
            .title-top {
                right: 0.0em; /* Shift Percept Left (Increased from 0.55em) */
            }
            
            .title-bottom {
                left: -0.077em; /* Shift Mind Right to close the remaining gap */
                margin-top: -0.1em; /* Tighter vertical containment */
            }
            
            .subtitle {
                font-family: 'Satoshi', sans-serif;
                font-weight: 500; /* Medium weight */
                font-size: var(--font-size-xl);
                color: var(--color-text-medium);
                margin-top: var(--space-s);
                letter-spacing: 0.05em;
                text-transform: uppercase;
            }

			.i-container {
				display: inline-block;
				position: relative;
			}
            
            .i {
                display: inline-block;
                transform-style: preserve-3d;
            }
		</style>
	</body>
</html>
